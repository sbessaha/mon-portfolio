{"ast":null,"code":"import { createVNode as _createVNode, resolveDirective as _resolveDirective } from \"vue\"; // Styles\n\nimport \"./VList.css\"; // Components\n\nimport { VListChildren } from \"./VListChildren.mjs\"; // Composables\n\nimport { createList } from \"./list.mjs\";\nimport { makeBorderProps, useBorder } from \"../../composables/border.mjs\";\nimport { useBackgroundColor } from \"../../composables/color.mjs\";\nimport { makeComponentProps } from \"../../composables/component.mjs\";\nimport { provideDefaults } from \"../../composables/defaults.mjs\";\nimport { makeDensityProps, useDensity } from \"../../composables/density.mjs\";\nimport { makeDimensionProps, useDimension } from \"../../composables/dimensions.mjs\";\nimport { makeElevationProps, useElevation } from \"../../composables/elevation.mjs\";\nimport { IconValue } from \"../../composables/icons.mjs\";\nimport { makeItemsProps } from \"../../composables/list-items.mjs\";\nimport { makeNestedProps, useNested } from \"../../composables/nested/nested.mjs\";\nimport { makeRoundedProps, useRounded } from \"../../composables/rounded.mjs\";\nimport { makeTagProps } from \"../../composables/tag.mjs\";\nimport { makeThemeProps, provideTheme } from \"../../composables/theme.mjs\";\nimport { makeVariantProps } from \"../../composables/variant.mjs\"; // Utilities\n\nimport { computed, ref, shallowRef, toRef } from 'vue';\nimport { EventProp, focusChild, genericComponent, getPropertyFromItem, isPrimitive, omit, propsFactory, useRender } from \"../../util/index.mjs\"; // Types\n\nfunction transformItem(props, item) {\n  const type = getPropertyFromItem(item, props.itemType, 'item');\n  const title = isPrimitive(item) ? item : getPropertyFromItem(item, props.itemTitle);\n  const value = getPropertyFromItem(item, props.itemValue, undefined);\n  const children = getPropertyFromItem(item, props.itemChildren);\n  const itemProps = props.itemProps === true ? omit(item, ['children']) : getPropertyFromItem(item, props.itemProps);\n  const _props = {\n    title,\n    value,\n    ...itemProps\n  };\n  return {\n    type,\n    title: _props.title,\n    value: _props.value,\n    props: _props,\n    children: type === 'item' && children ? transformItems(props, children) : undefined,\n    raw: item\n  };\n}\n\nfunction transformItems(props, items) {\n  const array = [];\n\n  for (const item of items) {\n    array.push(transformItem(props, item));\n  }\n\n  return array;\n}\n\nexport function useListItems(props) {\n  const items = computed(() => transformItems(props, props.items));\n  return {\n    items\n  };\n}\nexport const makeVListProps = propsFactory({\n  baseColor: String,\n\n  /* @deprecated */\n  activeColor: String,\n  activeClass: String,\n  bgColor: String,\n  disabled: Boolean,\n  expandIcon: IconValue,\n  collapseIcon: IconValue,\n  lines: {\n    type: [Boolean, String],\n    default: 'one'\n  },\n  slim: Boolean,\n  nav: Boolean,\n  'onClick:open': EventProp(),\n  'onClick:select': EventProp(),\n  'onUpdate:opened': EventProp(),\n  ...makeNestedProps({\n    selectStrategy: 'single-leaf',\n    openStrategy: 'list'\n  }),\n  ...makeBorderProps(),\n  ...makeComponentProps(),\n  ...makeDensityProps(),\n  ...makeDimensionProps(),\n  ...makeElevationProps(),\n  itemType: {\n    type: String,\n    default: 'type'\n  },\n  ...makeItemsProps(),\n  ...makeRoundedProps(),\n  ...makeTagProps(),\n  ...makeThemeProps(),\n  ...makeVariantProps({\n    variant: 'text'\n  })\n}, 'VList');\nexport const VList = genericComponent()({\n  name: 'VList',\n  props: makeVListProps(),\n  emits: {\n    'update:selected': value => true,\n    'update:activated': value => true,\n    'update:opened': value => true,\n    'click:open': value => true,\n    'click:activate': value => true,\n    'click:select': value => true\n  },\n\n  setup(props, _ref) {\n    let {\n      slots\n    } = _ref;\n    const {\n      items\n    } = useListItems(props);\n    const {\n      themeClasses\n    } = provideTheme(props);\n    const {\n      backgroundColorClasses,\n      backgroundColorStyles\n    } = useBackgroundColor(toRef(props, 'bgColor'));\n    const {\n      borderClasses\n    } = useBorder(props);\n    const {\n      densityClasses\n    } = useDensity(props);\n    const {\n      dimensionStyles\n    } = useDimension(props);\n    const {\n      elevationClasses\n    } = useElevation(props);\n    const {\n      roundedClasses\n    } = useRounded(props);\n    const {\n      children,\n      open,\n      parents,\n      select,\n      getPath\n    } = useNested(props);\n    const lineClasses = computed(() => props.lines ? `v-list--${props.lines}-line` : undefined);\n    const activeColor = toRef(props, 'activeColor');\n    const baseColor = toRef(props, 'baseColor');\n    const color = toRef(props, 'color');\n    createList();\n    provideDefaults({\n      VListGroup: {\n        activeColor,\n        baseColor,\n        color,\n        expandIcon: toRef(props, 'expandIcon'),\n        collapseIcon: toRef(props, 'collapseIcon')\n      },\n      VListItem: {\n        activeClass: toRef(props, 'activeClass'),\n        activeColor,\n        baseColor,\n        color,\n        density: toRef(props, 'density'),\n        disabled: toRef(props, 'disabled'),\n        lines: toRef(props, 'lines'),\n        nav: toRef(props, 'nav'),\n        slim: toRef(props, 'slim'),\n        variant: toRef(props, 'variant')\n      }\n    });\n    const isFocused = shallowRef(false);\n    const contentRef = ref();\n\n    function onFocusin(e) {\n      isFocused.value = true;\n    }\n\n    function onFocusout(e) {\n      isFocused.value = false;\n    }\n\n    function onFocus(e) {\n      if (!isFocused.value && !(e.relatedTarget && contentRef.value?.contains(e.relatedTarget))) focus();\n    }\n\n    function onKeydown(e) {\n      const target = e.target;\n      if (!contentRef.value || ['INPUT', 'TEXTAREA'].includes(target.tagName)) return;\n\n      if (e.key === 'ArrowDown') {\n        focus('next');\n      } else if (e.key === 'ArrowUp') {\n        focus('prev');\n      } else if (e.key === 'Home') {\n        focus('first');\n      } else if (e.key === 'End') {\n        focus('last');\n      } else {\n        return;\n      }\n\n      e.preventDefault();\n    }\n\n    function onMousedown(e) {\n      isFocused.value = true;\n    }\n\n    function focus(location) {\n      if (contentRef.value) {\n        return focusChild(contentRef.value, location);\n      }\n    }\n\n    useRender(() => {\n      return _createVNode(props.tag, {\n        \"ref\": contentRef,\n        \"class\": ['v-list', {\n          'v-list--disabled': props.disabled,\n          'v-list--nav': props.nav,\n          'v-list--slim': props.slim\n        }, themeClasses.value, backgroundColorClasses.value, borderClasses.value, densityClasses.value, elevationClasses.value, lineClasses.value, roundedClasses.value, props.class],\n        \"style\": [backgroundColorStyles.value, dimensionStyles.value, props.style],\n        \"tabindex\": props.disabled || isFocused.value ? -1 : 0,\n        \"role\": \"listbox\",\n        \"aria-activedescendant\": undefined,\n        \"onFocusin\": onFocusin,\n        \"onFocusout\": onFocusout,\n        \"onFocus\": onFocus,\n        \"onKeydown\": onKeydown,\n        \"onMousedown\": onMousedown\n      }, {\n        default: () => [_createVNode(VListChildren, {\n          \"items\": items.value,\n          \"returnObject\": props.returnObject\n        }, slots)]\n      });\n    });\n    return {\n      open,\n      select,\n      focus,\n      children,\n      parents,\n      getPath\n    };\n  }\n\n});","map":{"version":3,"mappings":"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","names":["VListChildren","createList","makeBorderProps","useBorder","useBackgroundColor","makeComponentProps","provideDefaults","makeDensityProps","useDensity","makeDimensionProps","useDimension","makeElevationProps","useElevation","IconValue","makeItemsProps","makeNestedProps","useNested","makeRoundedProps","useRounded","makeTagProps","makeThemeProps","provideTheme","makeVariantProps","computed","ref","shallowRef","toRef","EventProp","focusChild","genericComponent","getPropertyFromItem","isPrimitive","omit","propsFactory","useRender","transformItem","props","item","type","itemType","title","itemTitle","value","itemValue","undefined","children","itemChildren","itemProps","_props","transformItems","raw","items","array","push","useListItems","makeVListProps","baseColor","String","activeColor","activeClass","bgColor","disabled","Boolean","expandIcon","collapseIcon","lines","default","slim","nav","selectStrategy","openStrategy","variant","VList","name","emits","setup","_ref","slots","themeClasses","backgroundColorClasses","backgroundColorStyles","borderClasses","densityClasses","dimensionStyles","elevationClasses","roundedClasses","open","parents","select","getPath","lineClasses","color","VListGroup","VListItem","density","isFocused","contentRef","onFocusin","e","onFocusout","onFocus","relatedTarget","contains","focus","onKeydown","target","includes","tagName","key","preventDefault","onMousedown","location","class","style","returnObject"],"sources":["../../../src/components/VList/VList.tsx"],"sourcesContent":["// Styles\nimport './VList.sass'\n\n// Components\nimport { VListChildren } from './VListChildren'\n\n// Composables\nimport { createList } from './list'\nimport { makeBorderProps, useBorder } from '@/composables/border'\nimport { useBackgroundColor } from '@/composables/color'\nimport { makeComponentProps } from '@/composables/component'\nimport { provideDefaults } from '@/composables/defaults'\nimport { makeDensityProps, useDensity } from '@/composables/density'\nimport { makeDimensionProps, useDimension } from '@/composables/dimensions'\nimport { makeElevationProps, useElevation } from '@/composables/elevation'\nimport { IconValue } from '@/composables/icons'\nimport { makeItemsProps } from '@/composables/list-items'\nimport { makeNestedProps, useNested } from '@/composables/nested/nested'\nimport { makeRoundedProps, useRounded } from '@/composables/rounded'\nimport { makeTagProps } from '@/composables/tag'\nimport { makeThemeProps, provideTheme } from '@/composables/theme'\nimport { makeVariantProps } from '@/composables/variant'\n\n// Utilities\nimport { computed, ref, shallowRef, toRef } from 'vue'\nimport {\n  EventProp,\n  focusChild,\n  genericComponent,\n  getPropertyFromItem,\n  isPrimitive,\n  omit,\n  propsFactory,\n  useRender,\n} from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { VListChildrenSlots } from './VListChildren'\nimport type { ItemProps, ListItem } from '@/composables/list-items'\nimport type { GenericProps, SelectItemKey } from '@/util'\n\nexport interface InternalListItem<T = any> extends ListItem<T> {\n  type?: 'item' | 'subheader' | 'divider'\n}\n\nfunction transformItem (props: ItemProps & { itemType?: string }, item: any): InternalListItem {\n  const type = getPropertyFromItem(item, props.itemType, 'item')\n  const title = isPrimitive(item) ? item : getPropertyFromItem(item, props.itemTitle)\n  const value = getPropertyFromItem(item, props.itemValue, undefined)\n  const children = getPropertyFromItem(item, props.itemChildren)\n  const itemProps = props.itemProps === true\n    ? omit(item, ['children'])\n    : getPropertyFromItem(item, props.itemProps)\n\n  const _props = {\n    title,\n    value,\n    ...itemProps,\n  }\n\n  return {\n    type,\n    title: _props.title,\n    value: _props.value,\n    props: _props,\n    children: type === 'item' && children ? transformItems(props, children) : undefined,\n    raw: item,\n  }\n}\n\nfunction transformItems (props: ItemProps & { itemType?: string }, items: (string | object)[]) {\n  const array: InternalListItem[] = []\n\n  for (const item of items) {\n    array.push(transformItem(props, item))\n  }\n\n  return array\n}\n\nexport function useListItems (props: ItemProps & { itemType?: string }) {\n  const items = computed(() => transformItems(props, props.items))\n\n  return { items }\n}\n\nexport const makeVListProps = propsFactory({\n  baseColor: String,\n  /* @deprecated */\n  activeColor: String,\n  activeClass: String,\n  bgColor: String,\n  disabled: Boolean,\n  expandIcon: IconValue,\n  collapseIcon: IconValue,\n  lines: {\n    type: [Boolean, String] as PropType<'one' | 'two' | 'three' | false>,\n    default: 'one',\n  },\n  slim: Boolean,\n  nav: Boolean,\n\n  'onClick:open': EventProp<[{ id: unknown, value: boolean, path: unknown[] }]>(),\n  'onClick:select': EventProp<[{ id: unknown, value: boolean, path: unknown[] }]>(),\n  'onUpdate:opened': EventProp<[]>(),\n  ...makeNestedProps({\n    selectStrategy: 'single-leaf' as const,\n    openStrategy: 'list' as const,\n  }),\n  ...makeBorderProps(),\n  ...makeComponentProps(),\n  ...makeDensityProps(),\n  ...makeDimensionProps(),\n  ...makeElevationProps(),\n  itemType: {\n    type: String,\n    default: 'type',\n  },\n  ...makeItemsProps(),\n  ...makeRoundedProps(),\n  ...makeTagProps(),\n  ...makeThemeProps(),\n  ...makeVariantProps({ variant: 'text' } as const),\n}, 'VList')\n\ntype ItemType<T> = T extends readonly (infer U)[] ? U : never\n\nexport const VList = genericComponent<new <\n  T extends readonly any[],\n  S = unknown,\n  O = unknown\n>(\n  props: {\n    items?: T\n    itemTitle?: SelectItemKey<ItemType<T>>\n    itemValue?: SelectItemKey<ItemType<T>>\n    itemChildren?: SelectItemKey<ItemType<T>>\n    itemProps?: SelectItemKey<ItemType<T>>\n    selected?: S\n    'onUpdate:selected'?: (value: S) => void\n    'onClick:open'?: (value: { id: unknown, value: boolean, path: unknown[] }) => void\n    'onClick:select'?: (value: { id: unknown, value: boolean, path: unknown[] }) => void\n    opened?: O\n    'onUpdate:opened'?: (value: O) => void\n  },\n  slots: VListChildrenSlots<ItemType<T>>\n) => GenericProps<typeof props, typeof slots>>()({\n  name: 'VList',\n\n  props: makeVListProps(),\n\n  emits: {\n    'update:selected': (value: unknown) => true,\n    'update:activated': (value: unknown) => true,\n    'update:opened': (value: unknown) => true,\n    'click:open': (value: { id: unknown, value: boolean, path: unknown[] }) => true,\n    'click:activate': (value: { id: unknown, value: boolean, path: unknown[] }) => true,\n    'click:select': (value: { id: unknown, value: boolean, path: unknown[] }) => true,\n  },\n\n  setup (props, { slots }) {\n    const { items } = useListItems(props)\n    const { themeClasses } = provideTheme(props)\n    const { backgroundColorClasses, backgroundColorStyles } = useBackgroundColor(toRef(props, 'bgColor'))\n    const { borderClasses } = useBorder(props)\n    const { densityClasses } = useDensity(props)\n    const { dimensionStyles } = useDimension(props)\n    const { elevationClasses } = useElevation(props)\n    const { roundedClasses } = useRounded(props)\n    const { children, open, parents, select, getPath } = useNested(props)\n    const lineClasses = computed(() => props.lines ? `v-list--${props.lines}-line` : undefined)\n    const activeColor = toRef(props, 'activeColor')\n    const baseColor = toRef(props, 'baseColor')\n    const color = toRef(props, 'color')\n\n    createList()\n\n    provideDefaults({\n      VListGroup: {\n        activeColor,\n        baseColor,\n        color,\n        expandIcon: toRef(props, 'expandIcon'),\n        collapseIcon: toRef(props, 'collapseIcon'),\n      },\n      VListItem: {\n        activeClass: toRef(props, 'activeClass'),\n        activeColor,\n        baseColor,\n        color,\n        density: toRef(props, 'density'),\n        disabled: toRef(props, 'disabled'),\n        lines: toRef(props, 'lines'),\n        nav: toRef(props, 'nav'),\n        slim: toRef(props, 'slim'),\n        variant: toRef(props, 'variant'),\n      },\n    })\n\n    const isFocused = shallowRef(false)\n    const contentRef = ref<HTMLElement>()\n    function onFocusin (e: FocusEvent) {\n      isFocused.value = true\n    }\n\n    function onFocusout (e: FocusEvent) {\n      isFocused.value = false\n    }\n\n    function onFocus (e: FocusEvent) {\n      if (\n        !isFocused.value &&\n        !(e.relatedTarget && contentRef.value?.contains(e.relatedTarget as Node))\n      ) focus()\n    }\n\n    function onKeydown (e: KeyboardEvent) {\n      const target = e.target as HTMLElement\n\n      if (!contentRef.value || ['INPUT', 'TEXTAREA'].includes(target.tagName)) return\n\n      if (e.key === 'ArrowDown') {\n        focus('next')\n      } else if (e.key === 'ArrowUp') {\n        focus('prev')\n      } else if (e.key === 'Home') {\n        focus('first')\n      } else if (e.key === 'End') {\n        focus('last')\n      } else {\n        return\n      }\n\n      e.preventDefault()\n    }\n\n    function onMousedown (e: MouseEvent) {\n      isFocused.value = true\n    }\n\n    function focus (location?: 'next' | 'prev' | 'first' | 'last') {\n      if (contentRef.value) {\n        return focusChild(contentRef.value, location)\n      }\n    }\n\n    useRender(() => {\n      return (\n        <props.tag\n          ref={ contentRef }\n          class={[\n            'v-list',\n            {\n              'v-list--disabled': props.disabled,\n              'v-list--nav': props.nav,\n              'v-list--slim': props.slim,\n            },\n            themeClasses.value,\n            backgroundColorClasses.value,\n            borderClasses.value,\n            densityClasses.value,\n            elevationClasses.value,\n            lineClasses.value,\n            roundedClasses.value,\n            props.class,\n          ]}\n          style={[\n            backgroundColorStyles.value,\n            dimensionStyles.value,\n            props.style,\n          ]}\n          tabindex={ (props.disabled || isFocused.value) ? -1 : 0 }\n          role=\"listbox\"\n          aria-activedescendant={ undefined }\n          onFocusin={ onFocusin }\n          onFocusout={ onFocusout }\n          onFocus={ onFocus }\n          onKeydown={ onKeydown }\n          onMousedown={ onMousedown }\n        >\n          <VListChildren\n            items={ items.value }\n            returnObject={ props.returnObject }\n            v-slots={ slots }\n          />\n        </props.tag>\n      )\n    })\n\n    return {\n      open,\n      select,\n      focus,\n      children,\n      parents,\n      getPath,\n    }\n  },\n})\n\nexport type VList = InstanceType<typeof VList>\n"]},"metadata":{},"sourceType":"module"}