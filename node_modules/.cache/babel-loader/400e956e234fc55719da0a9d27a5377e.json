{"ast":null,"code":"// Utilities\nimport { defer, propsFactory } from \"../util/index.mjs\"; // Types\n// Composables\n\nexport const makeDelayProps = propsFactory({\n  closeDelay: [Number, String],\n  openDelay: [Number, String]\n}, 'delay');\nexport function useDelay(props, cb) {\n  let clearDelay = () => {};\n\n  function runDelay(isOpening) {\n    clearDelay?.();\n    const delay = Number(isOpening ? props.openDelay : props.closeDelay);\n    return new Promise(resolve => {\n      clearDelay = defer(delay, () => {\n        cb?.(isOpening);\n        resolve(isOpening);\n      });\n    });\n  }\n\n  function runOpenDelay() {\n    return runDelay(true);\n  }\n\n  function runCloseDelay() {\n    return runDelay(false);\n  }\n\n  return {\n    clearDelay,\n    runOpenDelay,\n    runCloseDelay\n  };\n}","map":{"version":3,"mappings":"AAAA;AAAA,SACSA,KADT,EACgBC,YADhB,QAC4B,mBAD5B,C,CAGA;AAMA;;AACA,OAAO,MAAMC,cAAc,GAAGD,YAAY,CAAC;EACzCE,UAAU,EAAE,CAACC,MAAD,EAASC,MAAT,CAD6B;EAEzCC,SAAS,EAAE,CAACF,MAAD,EAASC,MAAT;AAF8B,CAAD,EAGvC,OAHuC,CAAnC;AAKP,OAAO,SAASE,QAAT,CAAmBC,KAAnB,EAAsCC,EAAtC,EAAqE;EAC1E,IAAIC,UAAwB,GAAGA,MAAM,CAAE,CAAvC;;EAEA,SAASC,QAAT,CAAmBC,SAAnB,EAAuC;IACrCF,UAAU;IAEV,MAAMG,KAAK,GAAGT,MAAM,CAACQ,SAAS,GAAGJ,KAAK,CAACF,SAAT,GAAqBE,KAAK,CAACL,UAArC,CAApB;IAEA,OAAO,IAAIW,OAAJ,CAAYC,OAAO,IAAI;MAC5BL,UAAU,GAAGV,KAAK,CAACa,KAAD,EAAQ,MAAM;QAC9BJ,EAAE,GAAGG,SAAH,CAAFH;QACAM,OAAO,CAACH,SAAD,CAAPG;MACD,CAHiB,CAAlBL;IAID,CALM,CAAP;EAMF;;EAEA,SAASM,YAAT,GAAyB;IACvB,OAAOL,QAAQ,CAAC,IAAD,CAAf;EACF;;EAEA,SAASM,aAAT,GAA0B;IACxB,OAAON,QAAQ,CAAC,KAAD,CAAf;EACF;;EAEA,OAAO;IACLD,UADK;IAELM,YAFK;IAGLC;EAHK,CAAP;AAKF","names":["defer","propsFactory","makeDelayProps","closeDelay","Number","String","openDelay","useDelay","props","cb","clearDelay","runDelay","isOpening","delay","Promise","resolve","runOpenDelay","runCloseDelay"],"sources":["../../src/composables/delay.ts"],"sourcesContent":["// Utilities\nimport { defer, propsFactory } from '@/util'\n\n// Types\nexport interface DelayProps {\n  closeDelay?: number | string\n  openDelay?: number | string\n}\n\n// Composables\nexport const makeDelayProps = propsFactory({\n  closeDelay: [Number, String],\n  openDelay: [Number, String],\n}, 'delay')\n\nexport function useDelay (props: DelayProps, cb?: (value: boolean) => void) {\n  let clearDelay: (() => void) = () => {}\n\n  function runDelay (isOpening: boolean) {\n    clearDelay?.()\n\n    const delay = Number(isOpening ? props.openDelay : props.closeDelay)\n\n    return new Promise(resolve => {\n      clearDelay = defer(delay, () => {\n        cb?.(isOpening)\n        resolve(isOpening)\n      })\n    })\n  }\n\n  function runOpenDelay () {\n    return runDelay(true)\n  }\n\n  function runCloseDelay () {\n    return runDelay(false)\n  }\n\n  return {\n    clearDelay,\n    runOpenDelay,\n    runCloseDelay,\n  }\n}\n"]},"metadata":{},"sourceType":"module"}